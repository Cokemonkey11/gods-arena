package ForkedLightning
import AbilityTooltipGenerator
import GameConstants
import DamageSystem

public constant FORKED_LIGHTNING_ID = compiletime(ABIL_ID_GEN.next())

RealLevelClosure DAMAGE_PER_TARGET = lvl -> 125. + 125. * (lvl-1)
IntLevelClosure NUMBER_OF_TARGETS = lvl -> 3 + 2 * lvl

@compiletime function genAbility()
  let tooltip = new AbilityTooltipGenerator("Calls forth a cone of lightning.")
  new AbilityDefinitionSeaWitchForkedLightning(FORKED_LIGHTNING_ID)
  ..registerTooltipGenerator(tooltip)
  ..setRequiredLevel(1)
  ..presetButtonPosNormal(1, 2)
  ..presetButtonPosResearch(1, 0)
  ..presetHotkey("W")

  ..tooltipStartListen()
  ..addTooltipProperty("Damage Type", DamageTypeTooltips.magical)
  ..setLevels(NORMAL_SPELL_LEVELS)
  ..setName("Forked Lightning")
  ..presetNumberofTargetsHit(NUMBER_OF_TARGETS)
  ..presetDamageperTarget(DAMAGE_PER_TARGET)
  ..presetCastRange(lvl -> 650)
  ..presetManaCost(lvl -> 60 + 30 * lvl)
  ..presetCooldown(lvl -> 11 - 1. * lvl)
  ..tooltipStopListen()